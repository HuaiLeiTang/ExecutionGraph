<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1003px" preserveAspectRatio="none" style="width:1815px;height:1003px;" version="1.1" viewBox="0 0 1815 1003" width="1815px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rbk4egqi16au" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="988.7813" style="stroke: #A80036; stroke-width: 1.0;" width="618" x="330" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="584" y="16.5684">CEF [IO-Thread]</text><rect fill="#D3D3D3" height="988.7813" style="stroke: #A80036; stroke-width: 1.0;" width="734" x="1070.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="1336.5" y="16.5684">backend [Dispatcher-Thread]</text><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="798.207" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="207.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="267.4395"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="736.1641"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="827.918"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="431.8145"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="475.2578"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485" y="519.3906"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1696" y="581.9668"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="356" x2="356" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="511" x2="511" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="841" x2="841" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1204.5" x2="1204.5" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1490" x2="1490" y1="75.2871" y2="937.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1700.5" x2="1700.5" y1="75.2871" y2="937.8047"/><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="60.334">client js</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="957.3398">client js</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="60.334">CEF</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="957.3398">CEF</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="44.3105">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="60.7988">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="957.8047">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="974.293">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="738" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="745" y="44.3105">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="60.7988">requestHandler</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="738" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="745" y="957.8047">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="974.293">requestHandler</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1074.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1130" y="44.3105">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1081.5" y="60.7988">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1074.5" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1130" y="957.8047">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1081.5" y="974.293">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="1391" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="1398" y="44.3105">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="1405" y="60.7988">BackendRequestHandler</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="1391" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="1398" y="957.8047">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="1405" y="974.293">BackendRequestHandler</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1601.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1608.5" y="44.3105">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1615.5" y="60.7988">executionGraphBackend</text><rect fill="#FEFECE" filter="url(#f1rbk4egqi16au)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1601.5" y="936.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1608.5" y="957.8047">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1615.5" y="974.293">executionGraphBackend</text><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="798.207" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="207.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="267.4395"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="736.1641"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="827.918"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="431.8145"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="475.2578"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485" y="519.3906"/><rect fill="#FFFFFF" filter="url(#f1rbk4egqi16au)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1696" y="581.9668"/><polygon fill="#A80036" points="339,117.2871,349,121.2871,339,125.2871,343,121.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="345" y1="121.2871" y2="121.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="50" y="101.8555">AJAX Request:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="50" y="117.166">http://executiongraph-backend/&lt;requestId&gt;</text><polygon fill="#A80036" points="494,146.9082,504,150.9082,494,154.9082,498,150.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="500" y1="150.9082" y2="150.9082"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="368" y="145.9751">Create(...)</text><polygon fill="#A80036" points="824,176.041,834,180.041,824,184.041,828,180.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="830" y1="180.041" y2="180.041"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="523" y="175.1079">create (from pool)</text><polygon fill="#A80036" points="527,205.1738,517,209.1738,527,213.1738,523,209.1738" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="521" x2="840" y1="209.1738" y2="209.1738"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="533" y="204.2407">requestHandler</text><polygon fill="#A80036" points="372,234.3066,362,238.3066,372,242.3066,368,238.3066" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="510" y1="238.3066" y2="238.3066"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="378" y="233.3735">requestHandler</text><polygon fill="#A80036" points="824,263.4395,834,267.4395,824,271.4395,828,267.4395" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="267.4395" y2="267.4395"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="368" y="262.5063">ProcessRequest(request, callback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="846" x2="888" y1="296.8828" y2="296.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="888" x2="888" y1="296.8828" y2="309.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="888" y1="309.8828" y2="309.8828"/><polygon fill="#A80036" points="857,305.8828,847,309.8828,857,313.8828,853,309.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="853" y="292.1406">initRequest()</text><polygon fill="#A80036" points="372,334.8828,362,338.8828,372,342.8828,368,338.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="835" y1="338.8828" y2="338.8828"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="378" y="334.1274">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="422" y="334.4512">[error happened]</text><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="786,352.1934,896,352.1934,906,371.1934,896,390.1934,786,390.1934,776,371.1934,786,352.1934" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="788" y="368.7617">handling request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="788" y="384.0723">[or SetError]</text><polygon fill="#A80036" points="1188,427.8145,1198,431.8145,1188,435.8145,1192,431.8145" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="846" x2="1194" y1="431.8145" y2="431.8145"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="853" y="411.8813">addRequest(request,response)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="335" x="853" y="427.5156">[response contains callback: response headers ready]</text><polygon fill="#A80036" points="857,442.2578,847,446.2578,857,450.2578,853,446.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="851" x2="1204" y1="446.2578" y2="446.2578"/><polygon fill="#A80036" points="372,471.2578,362,475.2578,372,479.2578,368,475.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="840" y1="475.2578" y2="475.2578"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="378" y="470.3247">true</text><polygon fill="#A80036" points="1473,515.3906,1483,519.3906,1473,523.3906,1477,519.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1210" x2="1479" y1="519.3906" y2="519.3906"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1217" y="499.4575">handleRequest(request, response)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1217" y="515.0918">[optional threaded]</text><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="1408,532.834,1572,532.834,1582,543.834,1572,555.834,1408,555.834,1398,543.834,1408,532.834" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1410" y="548.9009">deserialize(request)</text><polygon fill="#A80036" points="1684,577.9668,1694,581.9668,1684,585.9668,1688,581.9668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1495" x2="1690" y1="581.9668" y2="581.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1502" y="577.5352">do work, e.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1588" y="577.2114">addNode(...)</text><polygon fill="#A80036" points="1506,607.2773,1496,611.2773,1506,615.2773,1502,611.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1500" x2="1700" y1="611.2773" y2="611.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1512" y="606.8457">completed</text><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="1412,624.5879,1568,624.5879,1578,635.5879,1568,647.5879,1412,647.5879,1402,635.5879,1412,624.5879" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1414" y="640.6548">serialize(response)</text><polygon fill="#A80036" points="1221,654.7207,1211,658.7207,1221,662.7207,1217,658.7207" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1215" x2="1489" y1="658.7207" y2="658.7207"/><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="1078,671.7207,1331,671.7207,1341,690.7207,1331,709.7207,1078,709.7207,1068,690.7207,1078,671.7207" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1080" y="687.7876">response.ready()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="1080" y="703.4219">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1101" y="703.0981">cancel("could not add node")</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1325" y="703.4219">]</text><polygon fill="#A80036" points="824,732.1641,834,736.1641,824,740.1641,828,736.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="736.1641" y2="736.1641"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="368" y="731.231">GetResponseHeaders(response, responseLength, redirectUrl)</text><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="727,749.2969,954,749.2969,964,768.2969,954,787.2969,727,787.2969,717,768.2969,727,749.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="729" y="765.8652">set MIME type and response length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="729" y="781.1758">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="750" y="780.8521">SetError()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="830" y="781.1758">]</text><polygon fill="#A80036" points="372,794.918,362,798.918,372,802.918,368,798.918" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="840" y1="798.918" y2="798.918"/><polygon fill="#A80036" points="824,823.918,834,827.918,824,831.918,828,827.918" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="827.918" y2="827.918"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="368" y="822.9849">ReadResponse(dataOut, bytesToRead, bytesRead, callback)</text><polygon fill="#FBFB77" filter="url(#f1rbk4egqi16au)" points="773,841.0508,909,841.0508,919,852.0508,909,864.0508,773,864.0508,763,852.0508,773,841.0508" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="775" y="857.6191">copy data to dataOut</text><polygon fill="#A80036" points="372,886.3613,362,890.3613,372,894.3613,368,890.3613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="840" y1="890.3613" y2="890.3613"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="378" y="885.4282">true, bytesRead = 512</text><polygon fill="#A80036" points="54,915.4941,44,919.4941,54,923.4941,50,919.4941" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="355" y1="919.4941" y2="919.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="60" y="915.0625">AJAX Response</text><!--
@startuml
participant client as "client js"

box "CEF [IO-Thread]" #LightGrey
participant CEF

participant backendHandlerFactory << BackendSchemeHandlerFactory >>
participant requestHandler << BackendResourceHandler >>
end box

box "backend [Dispatcher-Thread]" #LightGrey
    participant messageDispatcher as "AppHandler::m_messageDispatcher" <<MessageDispatcher>>
	participant BackendRequestHandler <<BackendRequestHandler>>
    participant executionGraphBackend <<ExecutionGraphBackend>>
end box

client -> CEF : AJAX Request:\nhttp://executiongraph-backend/<requestId>
activate CEF

    CEF -> backendHandlerFactory : ""Create(...)"" 
    activate backendHandlerFactory
        backendHandlerFactory -> requestHandler : ""create (from pool)""
        activate requestHandler
        backendHandlerFactory <- - requestHandler : ""requestHandler""
        deactivate requestHandler
        CEF <- - backendHandlerFactory : ""requestHandler""
    deactivate backendHandlerFactory

    CEF -> requestHandler : ""ProcessRequest(request, callback)""
    activate requestHandler
        requestHandler -> requestHandler : initRequest()
        CEF <- - requestHandler : ""false"" [error happened]
        hnote over requestHandler : handling request\n[or SetError]
        requestHandler -> messageDispatcher : ""addRequest(request,response)""\n[response contains callback: response headers ready]
        activate messageDispatcher
        requestHandler <- - messageDispatcher :
        deactivate messageDispatcher
        CEF <- - requestHandler : ""true""
    deactivate requestHandler

    
    activate messageDispatcher
        messageDispatcher -> BackendRequestHandler : ""handleRequest(request, response)""\n[optional threaded]
        activate BackendRequestHandler
            hnote over BackendRequestHandler: ""deserialize(request)""
            BackendRequestHandler -> executionGraphBackend : do work, e.g. ""addNode(...)""
            activate executionGraphBackend
                BackendRequestHandler <- - executionGraphBackend : completed
            deactivate executionGraphBackend
            hnote over BackendRequestHandler: ""serialize(response)""
            messageDispatcher <- - BackendRequestHandler
        deactivate BackendRequestHandler
    hnote over messageDispatcher: ""response.ready()""\n[or ""cancel("could not add node")""]

    CEF -> requestHandler : ""GetResponseHeaders(response, responseLength, redirectUrl)""
    deactivate messageDispatcher 
    activate requestHandler
        hnote over requestHandler: set MIME type and response length \n[or ""SetError()""]
        CEF <- requestHandler
    deactivate requestHandler

    CEF -> requestHandler : ""ReadResponse(dataOut, bytesToRead, bytesRead, callback)""
    activate requestHandler
        hnote over requestHandler: copy data to dataOut
        CEF <- requestHandler : ""true, bytesRead = 512""
    deactivate requestHandler

    CEF -> client : AJAX Response
deactivate CEF
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1019px" preserveAspectRatio="none" style="width:1889px;height:1019px;" version="1.1" viewBox="0 0 1889 1019" width="1889px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q420e7a73i2m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="1004.0918" style="stroke: #A80036; stroke-width: 1.0;" width="618" x="348" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="602" y="16.5684">CEF [IO-Thread]</text><rect fill="#D3D3D3" height="1004.0918" style="stroke: #A80036; stroke-width: 1.0;" width="768" x="1110.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="1393.5" y="16.5684">backend [Dispatcher-Thread]</text><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="798.5176" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="369" y="136.2871"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="579" y="166.2188"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="195.3516"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="207.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="282.75"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="751.4746"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="843.2285"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1218" y="447.125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1218" y="490.5684"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1559" y="534.7012"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1770" y="597.2773"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="374" x2="374" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="584" x2="584" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="859" x2="859" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1222.5" x2="1222.5" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1564" x2="1564" y1="75.2871" y2="953.1152"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1774.5" x2="1774.5" y1="75.2871" y2="953.1152"/><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="60.334">client js</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="972.6504">client js</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="352" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="359" y="60.334">CEF</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="352" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="359" y="972.6504">CEF</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="461" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="468" y="44.3105">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="501" y="60.7988">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="461" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="468" y="973.1152">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="501" y="989.6035">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="756" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="763" y="44.3105">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="769.5" y="60.7988">backendResourceHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="756" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="763" y="973.1152">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="769.5" y="989.6035">backendResourceHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="1114.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="199" x="1121.5" y="44.3105">«BackendRequestDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1158.5" y="60.7988">requestDispatcher</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="1114.5" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="199" x="1121.5" y="973.1152">«BackendRequestDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1158.5" y="989.6035">requestDispatcher</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="1465" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="1472" y="44.3105">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="1509" y="60.7988">requestHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="1465" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="1472" y="973.1152">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="1509" y="989.6035">requestHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1675.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1682.5" y="44.3105">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1744" y="60.7988">backend</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1675.5" y="952.1152"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1682.5" y="973.1152">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1744" y="989.6035">backend</text><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="798.5176" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="369" y="136.2871"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="579" y="166.2188"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="195.3516"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="207.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="282.75"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="751.4746"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="843.2285"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1218" y="447.125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1218" y="490.5684"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1559" y="534.7012"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1770" y="597.2773"/><polygon fill="#A80036" points="357,132.2871,367,136.2871,357,140.2871,361,136.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="363" y1="136.2871" y2="136.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="50" y="101.8555">REST Request:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="50" y="117.166">http://executiongraph-backend/&lt;requestType&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="50" y="132.4766">[request type e.g. "addNode"]</text><polygon fill="#A80036" points="567,162.2188,577,166.2188,567,170.2188,571,166.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="573" y1="166.2188" y2="166.2188"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="386" y="161.2856">Create(...)</text><polygon fill="#A80036" points="842,191.3516,852,195.3516,842,199.3516,846,195.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="848" y1="195.3516" y2="195.3516"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="596" y="190.4185">create (from pool)</text><polygon fill="#A80036" points="600,220.4844,590,224.4844,600,228.4844,596,224.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="594" x2="858" y1="224.4844" y2="224.4844"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="606" y="219.5513">backendResourceHandler</text><polygon fill="#A80036" points="390,249.6172,380,253.6172,390,257.6172,386,253.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="583" y1="253.6172" y2="253.6172"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="396" y="248.6841">backendResourceHandler</text><polygon fill="#A80036" points="842,278.75,852,282.75,842,286.75,846,282.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="848" y1="282.75" y2="282.75"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="386" y="277.8169">ProcessRequest(request, callback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="864" x2="906" y1="312.1934" y2="312.1934"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="906" x2="906" y1="312.1934" y2="325.1934"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="865" x2="906" y1="325.1934" y2="325.1934"/><polygon fill="#A80036" points="875,321.1934,865,325.1934,875,329.1934,871,325.1934" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="871" y="307.4512">initRequest()</text><polygon fill="#A80036" points="390,350.1934,380,354.1934,390,358.1934,386,354.1934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="853" y1="354.1934" y2="354.1934"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="396" y="349.438">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="440" y="349.7617">[error happened]</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="804,367.5039,914,367.5039,924,386.5039,914,405.5039,804,405.5039,794,386.5039,804,367.5039" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="806" y="384.0723">handling request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="806" y="399.3828">[or SetError]</text><polygon fill="#A80036" points="1206,443.125,1216,447.125,1206,451.125,1210,447.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="864" x2="1212" y1="447.125" y2="447.125"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="871" y="427.1919">addRequest(requestCef,responsePromiseCef)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="335" x="871" y="442.8262">[response contains callback: response headers ready]</text><polygon fill="#A80036" points="875,457.5684,865,461.5684,875,465.5684,871,461.5684" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="869" x2="1222" y1="461.5684" y2="461.5684"/><polygon fill="#A80036" points="390,486.5684,380,490.5684,390,494.5684,386,490.5684" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="858" y1="490.5684" y2="490.5684"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="396" y="485.6353">true</text><polygon fill="#A80036" points="1547,530.7012,1557,534.7012,1547,538.7012,1551,534.7012" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1228" x2="1553" y1="534.7012" y2="534.7012"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="1235" y="514.7681">handleRequest(request, responsePromise)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1235" y="530.4023">[optional threaded]</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1482,548.1445,1646,548.1445,1656,559.1445,1646,571.1445,1482,571.1445,1472,559.1445,1482,548.1445" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1484" y="564.2114">deserialize(request)</text><polygon fill="#A80036" points="1758,593.2773,1768,597.2773,1758,601.2773,1762,597.2773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1569" x2="1764" y1="597.2773" y2="597.2773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1576" y="592.8457">do work, e.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1662" y="592.522">addNode(...)</text><polygon fill="#A80036" points="1580,622.5879,1570,626.5879,1580,630.5879,1576,626.5879" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1574" x2="1774" y1="626.5879" y2="626.5879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1586" y="622.1563">completed</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1486,639.8984,1642,639.8984,1652,650.8984,1642,662.8984,1486,662.8984,1476,650.8984,1486,639.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1488" y="655.9653">serialize(response)</text><polygon fill="#A80036" points="1239,670.0313,1229,674.0313,1239,678.0313,1235,674.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1233" x2="1563" y1="674.0313" y2="674.0313"/><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1096,687.0313,1349,687.0313,1359,706.0313,1349,725.0313,1096,725.0313,1086,706.0313,1096,687.0313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1098" y="703.0981">response.ready()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="1098" y="718.7324">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1119" y="718.4087">cancel("could not add node")</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1343" y="718.7324">]</text><polygon fill="#A80036" points="842,747.4746,852,751.4746,842,755.4746,846,751.4746" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="848" y1="751.4746" y2="751.4746"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="386" y="746.5415">GetResponseHeaders(response, responseLength, redirectUrl)</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="740,764.6074,978,764.6074,988,783.6074,978,802.6074,740,802.6074,730,783.6074,740,764.6074" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="742" y="781.1758">copy MIME type and response length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="742" y="796.4863">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="763" y="796.1626">SetError()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="843" y="796.4863">]</text><polygon fill="#A80036" points="390,810.2285,380,814.2285,390,818.2285,386,814.2285" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="858" y1="814.2285" y2="814.2285"/><polygon fill="#A80036" points="842,839.2285,852,843.2285,842,847.2285,846,843.2285" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="848" y1="843.2285" y2="843.2285"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="386" y="838.2954">ReadResponse(dataOut, bytesToRead, bytesRead, callback)</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="791,856.3613,927,856.3613,937,867.3613,927,879.3613,791,879.3613,781,867.3613,791,856.3613" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="793" y="872.9297">copy data to dataOut</text><polygon fill="#A80036" points="390,901.6719,380,905.6719,390,909.6719,386,905.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="858" y1="905.6719" y2="905.6719"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="396" y="900.7388">true, bytesRead = 512</text><polygon fill="#A80036" points="54,930.8047,44,934.8047,54,938.8047,50,934.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="373" y1="934.8047" y2="934.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="60" y="930.373">REST Response</text><!--
@startuml
participant client as "client js"

box "CEF [IO-Thread]" #LightGrey
participant CEF

participant backendHandlerFactory << BackendSchemeHandlerFactory >>
participant backendResourceHandler << BackendResourceHandler >>
end box

box "backend [Dispatcher-Thread]" #LightGrey
    participant requestDispatcher <<BackendRequestDispatcher>>
	participant requestHandler <<BackendRequestHandler>>
    participant backend <<ExecutionGraphBackend>>
end box

client -> CEF : REST Request:\nhttp://executiongraph-backend/<requestType>\n[request type e.g. "addNode"]
activate CEF

    CEF -> backendHandlerFactory : ""Create(...)"" 
    activate backendHandlerFactory
        backendHandlerFactory -> backendResourceHandler : ""create (from pool)""
        activate backendResourceHandler
        backendHandlerFactory <- - backendResourceHandler : ""backendResourceHandler""
        deactivate backendResourceHandler
        CEF <- - backendHandlerFactory : ""backendResourceHandler""
    deactivate backendHandlerFactory

    CEF -> backendResourceHandler : ""ProcessRequest(request, callback)""
    activate backendResourceHandler
        backendResourceHandler -> backendResourceHandler : initRequest()
        CEF <- - backendResourceHandler : ""false"" [error happened]
        hnote over backendResourceHandler : handling request\n[or SetError]
        backendResourceHandler -> requestDispatcher : ""addRequest(requestCef,responsePromiseCef)""\n[response contains callback: response headers ready]
        activate requestDispatcher
        backendResourceHandler <- - requestDispatcher :
        deactivate requestDispatcher
        CEF <- - backendResourceHandler : ""true""
    deactivate backendResourceHandler

    
    activate requestDispatcher
        requestDispatcher -> requestHandler : ""handleRequest(request, responsePromise)""\n[optional threaded]
        activate requestHandler
            hnote over requestHandler: ""deserialize(request)""
            requestHandler -> backend : do work, e.g. ""addNode(...)""
            activate backend
                requestHandler <- - backend : completed
            deactivate backend
            hnote over requestHandler: ""serialize(response)""
            requestDispatcher <- - requestHandler
        deactivate requestHandler
    hnote over requestDispatcher: ""response.ready()""\n[or ""cancel("could not add node")""]

    CEF -> backendResourceHandler : ""GetResponseHeaders(response, responseLength, redirectUrl)""
    deactivate requestDispatcher 
    activate backendResourceHandler
        hnote over backendResourceHandler: copy MIME type and response length \n[or ""SetError()""]
        CEF <- backendResourceHandler
    deactivate backendResourceHandler

    CEF -> backendResourceHandler : ""ReadResponse(dataOut, bytesToRead, bytesRead, callback)""
    activate backendResourceHandler
        hnote over backendResourceHandler: copy data to dataOut
        CEF <- backendResourceHandler : ""true, bytesRead = 512""
    deactivate backendResourceHandler

    CEF -> client : REST Response
deactivate CEF
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
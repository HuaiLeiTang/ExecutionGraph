<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="988px" preserveAspectRatio="none" style="width:1815px;height:988px;" version="1.1" viewBox="0 0 1815 988" width="1815px" zoomAndPan="magnify"><defs><filter height="300%" id="f1l9pheb6871v9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="973.4707" style="stroke: #A80036; stroke-width: 1.0;" width="618" x="330" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="584" y="16.5684">CEF [IO-Thread]</text><rect fill="#D3D3D3" height="973.4707" style="stroke: #A80036; stroke-width: 1.0;" width="734" x="1070.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="1336.5" y="16.5684">backend [Dispatcher-Thread]</text><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="782.8965" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="192.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="267.4395"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="720.8535"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="812.6074"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="416.5039"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="459.9473"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485" y="504.0801"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1696" y="566.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="356" x2="356" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="511" x2="511" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="841" x2="841" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1204.5" x2="1204.5" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1490" x2="1490" y1="75.2871" y2="922.4941"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1700.5" x2="1700.5" y1="75.2871" y2="922.4941"/><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="60.334">client js</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="942.0293">client js</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="60.334">CEF</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="942.0293">CEF</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="44.3105">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="60.7988">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="942.4941">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="958.9824">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="738" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="745" y="44.3105">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="60.7988">requestHandler</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="738" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="745" y="942.4941">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="786" y="958.9824">requestHandler</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1074.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1130" y="44.3105">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1081.5" y="60.7988">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1074.5" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1130" y="942.4941">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1081.5" y="958.9824">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1389" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="184" x="1396" y="44.3105">«BackendMessageHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1402.5" y="60.7988">backendMessageHandler</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1389" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="184" x="1396" y="942.4941">«BackendMessageHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1402.5" y="958.9824">backendMessageHandler</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1601.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1608.5" y="44.3105">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1615.5" y="60.7988">executionGraphBackend</text><rect fill="#FEFECE" filter="url(#f1l9pheb6871v9)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1601.5" y="921.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1608.5" y="942.4941">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1615.5" y="958.9824">executionGraphBackend</text><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="782.8965" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="192.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="267.4395"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="62.7539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="720.8535"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="836" y="812.6074"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="14.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="416.5039"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="260.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1200" y="459.9473"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485" y="504.0801"/><rect fill="#FFFFFF" filter="url(#f1l9pheb6871v9)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1696" y="566.6563"/><polygon fill="#A80036" points="339,117.2871,349,121.2871,339,125.2871,343,121.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="345" y1="121.2871" y2="121.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="50" y="101.8555">AJAX Request:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="50" y="117.166">http://executiongraph-backend/&lt;requestId&gt;</text><polygon fill="#A80036" points="494,146.9082,504,150.9082,494,154.9082,498,150.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="500" y1="150.9082" y2="150.9082"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="368" y="145.9751">Create(...)</text><polygon fill="#A80036" points="824,176.041,834,180.041,824,184.041,828,180.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="830" y1="180.041" y2="180.041"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="523" y="175.1079">create (from pool)</text><polygon fill="#A80036" points="527,205.1738,517,209.1738,527,213.1738,523,209.1738" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="521" x2="840" y1="209.1738" y2="209.1738"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="533" y="204.2407">requestHandler</text><polygon fill="#A80036" points="372,234.3066,362,238.3066,372,242.3066,368,238.3066" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="510" y1="238.3066" y2="238.3066"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="378" y="233.3735">requestHandler</text><polygon fill="#A80036" points="824,263.4395,834,267.4395,824,271.4395,828,267.4395" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="267.4395" y2="267.4395"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="368" y="262.5063">ProcessRequest(request, callback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="846" x2="888" y1="296.8828" y2="296.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="888" x2="888" y1="296.8828" y2="309.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="847" x2="888" y1="309.8828" y2="309.8828"/><polygon fill="#A80036" points="857,305.8828,847,309.8828,857,313.8828,853,309.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="853" y="292.1406">initRequest()</text><polygon fill="#A80036" points="372,334.8828,362,338.8828,372,342.8828,368,338.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="835" y1="338.8828" y2="338.8828"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="378" y="334.1274">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="422" y="334.4512">[error happened]</text><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="786,352.1934,896,352.1934,906,363.1934,896,375.1934,786,375.1934,776,363.1934,786,352.1934" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="788" y="368.7617">handling request</text><polygon fill="#A80036" points="1188,412.5039,1198,416.5039,1188,420.5039,1192,416.5039" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="846" x2="1194" y1="416.5039" y2="416.5039"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="853" y="396.5708">addRequest(request,response)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="335" x="853" y="412.2051">[response contains callback: response headers ready]</text><polygon fill="#A80036" points="857,426.9473,847,430.9473,857,434.9473,853,430.9473" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="851" x2="1204" y1="430.9473" y2="430.9473"/><polygon fill="#A80036" points="372,455.9473,362,459.9473,372,463.9473,368,459.9473" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="840" y1="459.9473" y2="459.9473"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="378" y="455.0142">true</text><polygon fill="#A80036" points="1473,500.0801,1483,504.0801,1473,508.0801,1477,504.0801" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1210" x2="1479" y1="504.0801" y2="504.0801"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1217" y="484.147">handleRequest(request, response)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1217" y="499.7813">[optional threaded]</text><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="1408,517.5234,1572,517.5234,1582,528.5234,1572,540.5234,1408,540.5234,1398,528.5234,1408,517.5234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1410" y="533.5903">deserialize(request)</text><polygon fill="#A80036" points="1684,562.6563,1694,566.6563,1684,570.6563,1688,566.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1495" x2="1690" y1="566.6563" y2="566.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1502" y="562.2246">do work, e.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1588" y="561.9009">addNode(...)</text><polygon fill="#A80036" points="1506,591.9668,1496,595.9668,1506,599.9668,1502,595.9668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1500" x2="1700" y1="595.9668" y2="595.9668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1512" y="591.5352">completed</text><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="1412,609.2773,1568,609.2773,1578,620.2773,1568,632.2773,1412,632.2773,1402,620.2773,1412,609.2773" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1414" y="625.3442">serialize(response)</text><polygon fill="#A80036" points="1221,639.4102,1211,643.4102,1221,647.4102,1217,643.4102" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1215" x2="1489" y1="643.4102" y2="643.4102"/><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="1078,656.4102,1331,656.4102,1341,675.4102,1331,694.4102,1078,694.4102,1068,675.4102,1078,656.4102" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1080" y="672.4771">response.ready()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="1080" y="688.1113">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1101" y="687.7876">cancel("could not add node")</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1325" y="688.1113">]</text><polygon fill="#A80036" points="824,716.8535,834,720.8535,824,724.8535,828,720.8535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="720.8535" y2="720.8535"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="368" y="715.9204">GetResponseHeaders(response, responseLength, redirectUrl)</text><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="727,733.9863,954,733.9863,964,752.9863,954,771.9863,727,771.9863,717,752.9863,727,733.9863" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="729" y="750.5547">set MIME type and response length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="729" y="765.8652">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="750" y="765.5415">SetError()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="830" y="765.8652">]</text><polygon fill="#A80036" points="372,779.6074,362,783.6074,372,787.6074,368,783.6074" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="840" y1="783.6074" y2="783.6074"/><polygon fill="#A80036" points="824,808.6074,834,812.6074,824,816.6074,828,812.6074" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="830" y1="812.6074" y2="812.6074"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="368" y="807.6743">ReadResponse(dataOut, bytesToRead, bytesRead, callback)</text><polygon fill="#FBFB77" filter="url(#f1l9pheb6871v9)" points="773,825.7402,909,825.7402,919,836.7402,909,848.7402,773,848.7402,763,836.7402,773,825.7402" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="775" y="842.3086">copy data to dataOut</text><polygon fill="#A80036" points="372,871.0508,362,875.0508,372,879.0508,368,875.0508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="840" y1="875.0508" y2="875.0508"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="378" y="870.1177">true, bytesRead = 512</text><polygon fill="#A80036" points="54,900.1836,44,904.1836,54,908.1836,50,904.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="355" y1="904.1836" y2="904.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="60" y="899.752">AJAX Response</text><!--
@startuml
participant client as "client js"

box "CEF [IO-Thread]" #LightGrey
participant CEF

participant backendHandlerFactory << BackendSchemeHandlerFactory >>
participant requestHandler << BackendResourceHandler >>
end box

box "backend [Dispatcher-Thread]" #LightGrey
    participant messageDispatcher as "AppHandler::m_messageDispatcher" <<MessageDispatcher>>
	participant backendMessageHandler <<BackendMessageHandler>>
    participant executionGraphBackend <<ExecutionGraphBackend>>
end box

client -> CEF : AJAX Request:\nhttp://executiongraph-backend/<requestId>
activate CEF

    CEF -> backendHandlerFactory : ""Create(...)"" 
    activate backendHandlerFactory
        backendHandlerFactory -> requestHandler : ""create (from pool)""
        activate requestHandler
        backendHandlerFactory <- - requestHandler : ""requestHandler""
        deactivate requestHandler
        CEF <- - backendHandlerFactory : ""requestHandler""
    deactivate backendHandlerFactory

    CEF -> requestHandler : ""ProcessRequest(request, callback)""
    activate requestHandler
        requestHandler -> requestHandler : initRequest()
        CEF <- - requestHandler : ""false"" [error happened]
        hnote over requestHandler : handling request
        requestHandler -> messageDispatcher : ""addRequest(request,response)""\n[response contains callback: response headers ready]
        activate messageDispatcher
        requestHandler <- - messageDispatcher :
        deactivate messageDispatcher
        CEF <- - requestHandler : ""true""
    deactivate requestHandler

    
    activate messageDispatcher
        messageDispatcher -> backendMessageHandler : ""handleRequest(request, response)""\n[optional threaded]
        activate backendMessageHandler
            hnote over backendMessageHandler: ""deserialize(request)""
            backendMessageHandler -> executionGraphBackend : do work, e.g. ""addNode(...)""
            activate executionGraphBackend
                backendMessageHandler <- - executionGraphBackend : completed
            deactivate executionGraphBackend
            hnote over backendMessageHandler: ""serialize(response)""
            messageDispatcher <- - backendMessageHandler
        deactivate backendMessageHandler
    hnote over messageDispatcher: ""response.ready()""\n[or ""cancel("could not add node")""]

    CEF -> requestHandler : ""GetResponseHeaders(response, responseLength, redirectUrl)""
    deactivate messageDispatcher 
    activate requestHandler
        hnote over requestHandler: set MIME type and response length \n[or ""SetError()""]
        CEF <- requestHandler
    deactivate requestHandler

    CEF -> requestHandler : ""ReadResponse(dataOut, bytesToRead, bytesRead, callback)""
    activate requestHandler
        hnote over requestHandler: copy data to dataOut
        CEF <- requestHandler : ""true, bytesRead = 512""
    deactivate requestHandler

    CEF -> client : AJAX Response
deactivate CEF
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
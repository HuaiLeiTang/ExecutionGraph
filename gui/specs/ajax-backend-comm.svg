<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1002px" preserveAspectRatio="none" style="width:1895px;height:1002px;" version="1.1" viewBox="0 0 1895 1002" width="1895px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lz0afqxqsh9o" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="987.1152" style="stroke: #A80036; stroke-width: 1.0;" width="713" x="330" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="631.5" y="16.5684">CEF [IO-Thread]</text><rect fill="#D3D3D3" height="987.1152" style="stroke: #A80036; stroke-width: 1.0;" width="782" x="1102.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="1392.5" y="16.5684">backend [Dispatcher-Thread]</text><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="796.541" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="728.5" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="29" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="194.1738"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="178.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="310.5723"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="734.6758"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="826.252"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="245.5957" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1232" y="489.0801"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1565" y="533.2129"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1776" y="595.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="356" x2="356" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="511" x2="511" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="733" x2="733" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="936" x2="936" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1236.5" x2="1236.5" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1570" x2="1570" y1="75.2871" y2="936.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1780.5" x2="1780.5" y1="75.2871" y2="936.1387"/><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="60.334">client js</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="955.6738">client js</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="60.334">CEF</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="40" x="334" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="341" y="955.6738">CEF</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="44.3105">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="60.7988">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="242" x="388" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="228" x="395" y="956.1387">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="428" y="972.627">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="644" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="161" x="651" y="44.3105">«ResourceHandlerPool»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="659.5" y="60.7988">resourceHandlerPool</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="644" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="161" x="651" y="956.1387">«ResourceHandlerPool»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="659.5" y="972.627">resourceHandlerPool</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="833" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="840" y="44.3105">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="881" y="60.7988">requestHandler</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="833" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="188" x="840" y="956.1387">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="881" y="972.627">requestHandler</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1106.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1162" y="44.3105">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1113.5" y="60.7988">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="1106.5" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="1162" y="956.1387">«MessageDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="243" x="1113.5" y="972.627">AppHandler::m_messageDispatcher</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1469" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="184" x="1476" y="44.3105">«BackendMessageHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1482.5" y="60.7988">backendMessageHandler</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="1469" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="184" x="1476" y="956.1387">«BackendMessageHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1482.5" y="972.627">backendMessageHandler</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1681.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1688.5" y="44.3105">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1695.5" y="60.7988">executionGraphBackend</text><rect fill="#FEFECE" filter="url(#f1lz0afqxqsh9o)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="1681.5" y="935.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="181" x="1688.5" y="956.1387">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="1695.5" y="972.627">executionGraphBackend</text><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="796.541" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="351" y="121.2871"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="130.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="150.9082"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="72.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="728.5" y="180.041"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="29" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="194.1738"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="178.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="310.5723"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="734.6758"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="62.4434" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="931" y="826.252"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="245.5957" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1232" y="489.0801"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="139.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1565" y="533.2129"/><rect fill="#FFFFFF" filter="url(#f1lz0afqxqsh9o)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1776" y="595.7891"/><polygon fill="#A80036" points="339,117.2871,349,121.2871,339,125.2871,343,121.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="345" y1="121.2871" y2="121.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="50" y="101.8555">AJAX Request:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="50" y="117.166">http://executiongraph-backend/&lt;requestId&gt;</text><polygon fill="#A80036" points="494,146.9082,504,150.9082,494,154.9082,498,150.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="500" y1="150.9082" y2="150.9082"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="368" y="145.9751">Create(...)</text><polygon fill="#A80036" points="716.5,176.041,726.5,180.041,716.5,184.041,720.5,180.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="722.5" y1="180.041" y2="180.041"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="523" y="175.1079">checkoutUnusuedHandler()</text><polygon fill="#A80036" points="919,190.1738,929,194.1738,919,198.1738,923,194.1738" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="738.5" x2="925" y1="194.1738" y2="194.1738"/><polygon fill="#A80036" points="749.5,219.1738,739.5,223.1738,749.5,227.1738,745.5,223.1738" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="743.5" x2="935" y1="223.1738" y2="223.1738"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="755.5" y="218.2407">requestHandler</text><polygon fill="#A80036" points="527,248.3066,517,252.3066,527,256.3066,523,252.3066" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="521" x2="732.5" y1="252.3066" y2="252.3066"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="533" y="247.3735">requestHandler</text><polygon fill="#A80036" points="372,277.4395,362,281.4395,372,285.4395,368,281.4395" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="510" y1="281.4395" y2="281.4395"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="378" y="276.5063">requestHandler</text><polygon fill="#A80036" points="919,306.5723,929,310.5723,919,314.5723,923,310.5723" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="925" y1="310.5723" y2="310.5723"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="368" y="305.6392">ProcessRequest(request, callback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="941" x2="983" y1="340.0156" y2="340.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="983" x2="983" y1="340.0156" y2="353.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="942" x2="983" y1="353.0156" y2="353.0156"/><polygon fill="#A80036" points="952,349.0156,942,353.0156,952,357.0156,948,353.0156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="948" y="335.2734">initRequest()</text><polygon fill="#A80036" points="372,378.0156,362,382.0156,372,386.0156,368,382.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="930" y1="382.0156" y2="382.0156"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="378" y="377.2603">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="422" y="377.584">[error happened]</text><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="881,395.3262,991,395.3262,1001,406.3262,991,418.3262,881,418.3262,871,406.3262,881,395.3262" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="883" y="411.8945">handling request</text><polygon fill="#A80036" points="1225,455.6367,1235,459.6367,1225,463.6367,1229,459.6367" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="941" x2="1231" y1="459.6367" y2="459.6367"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="948" y="439.7036">addRequest(requestBin,responseBin)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="948" y="455.3379">[responseBin contains the callback]</text><polygon fill="#A80036" points="372,485.0801,362,489.0801,372,493.0801,368,489.0801" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="366" x2="935" y1="489.0801" y2="489.0801"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="378" y="484.147">true</text><polygon fill="#A80036" points="1553,529.2129,1563,533.2129,1553,537.2129,1557,533.2129" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1242" x2="1559" y1="533.2129" y2="533.2129"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="1249" y="513.2798">handleRequest(requestBin, responseBin)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1249" y="528.9141">[optional threaded]</text><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="1476,546.6563,1664,546.6563,1674,557.6563,1664,569.6563,1476,569.6563,1466,557.6563,1476,546.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1478" y="562.7231">deserialize(requestBin)</text><polygon fill="#A80036" points="1764,591.7891,1774,595.7891,1764,599.7891,1768,595.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1575" x2="1770" y1="595.7891" y2="595.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="1582" y="591.3574">do work, e.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1668" y="591.0337">addNode(...)</text><polygon fill="#A80036" points="1586,621.0996,1576,625.0996,1586,629.0996,1582,625.0996" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1580" x2="1780" y1="625.0996" y2="625.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1592" y="620.668">completed</text><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="1480,638.4102,1660,638.4102,1670,649.4102,1660,661.4102,1480,661.4102,1470,649.4102,1480,638.4102" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1482" y="654.4771">serialize(responseBin)</text><polygon fill="#A80036" points="1253,668.543,1243,672.543,1253,676.543,1249,672.543" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1247" x2="1569" y1="672.543" y2="672.543"/><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="1147,685.543,1327,685.543,1337,696.543,1327,708.543,1147,708.543,1137,696.543,1147,685.543" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1149" y="701.6099">responseBin.Finished()</text><polygon fill="#A80036" points="919,730.6758,929,734.6758,919,738.6758,923,734.6758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="925" y1="734.6758" y2="734.6758"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="368" y="729.7427">GetResponseHeaders(response, responseLength, redirectUrl)</text><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="824,747.8086,1047,747.8086,1057,758.8086,1047,770.8086,824,770.8086,814,758.8086,824,747.8086" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="826" y="764.377">set MIME type and response length</text><polygon fill="#A80036" points="372,793.1191,362,797.1191,372,801.1191,368,797.1191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="935" y1="797.1191" y2="797.1191"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="378" y="792.186">true, bytesRead = 512</text><polygon fill="#A80036" points="919,822.252,929,826.252,919,830.252,923,826.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="361" x2="925" y1="826.252" y2="826.252"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="368" y="821.3188">ReadResponse(dataOut, bytesToRead, bytesRead, callback)</text><polygon fill="#FBFB77" filter="url(#f1lz0afqxqsh9o)" points="868,839.3848,1004,839.3848,1014,850.3848,1004,862.3848,868,862.3848,858,850.3848,868,839.3848" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="870" y="855.9531">copy data to dataOut</text><polygon fill="#A80036" points="372,884.6953,362,888.6953,372,892.6953,368,888.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="935" y1="888.6953" y2="888.6953"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="378" y="883.7622">true, bytesRead = 512</text><polygon fill="#A80036" points="54,913.8281,44,917.8281,54,921.8281,50,917.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="355" y1="917.8281" y2="917.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="60" y="913.3965">AJAX Response</text><!--
@startuml
participant client as "client js"

box "CEF [IO-Thread]" #LightGrey
participant CEF

participant backendHandlerFactory << BackendSchemeHandlerFactory >>
participant resourceHandlerPool << ResourceHandlerPool >>
participant requestHandler << BackendResourceHandler >>
end box

box "backend [Dispatcher-Thread]" #LightGrey
    participant messageDispatcher as "AppHandler::m_messageDispatcher" <<MessageDispatcher>>
	participant backendMessageHandler <<BackendMessageHandler>>
    participant executionGraphBackend <<ExecutionGraphBackend>>
end box

client -> CEF : AJAX Request:\nhttp://executiongraph-backend/<requestId>
activate CEF

    CEF -> backendHandlerFactory : ""Create(...)"" 
    activate backendHandlerFactory
        backendHandlerFactory -> resourceHandlerPool : ""checkoutUnusuedHandler()""
        activate resourceHandlerPool
        resourceHandlerPool -> requestHandler
        activate requestHandler
        resourceHandlerPool <- - requestHandler : ""requestHandler""
        deactivate requestHandler
        backendHandlerFactory <- - resourceHandlerPool : ""requestHandler""
        deactivate resourceHandlerPool
        CEF <- - backendHandlerFactory : ""requestHandler""
    deactivate backendHandlerFactory

    CEF -> requestHandler : ""ProcessRequest(request, callback)""
    activate requestHandler
        requestHandler -> requestHandler : initRequest()
        CEF <- - requestHandler : ""false"" [error happened]
        hnote over requestHandler : handling request
        requestHandler - -> messageDispatcher : ""addRequest(requestBin,responseBin)""\n[responseBin contains the callback]
        CEF <- - requestHandler : ""true""
    deactivate requestHandler

    
    activate messageDispatcher
        messageDispatcher -> backendMessageHandler : ""handleRequest(requestBin, responseBin)""\n[optional threaded]
        activate backendMessageHandler
            hnote over backendMessageHandler: ""deserialize(requestBin)""
            backendMessageHandler -> executionGraphBackend : do work, e.g. ""addNode(...)""
            activate executionGraphBackend
                backendMessageHandler <- - executionGraphBackend : completed
            deactivate executionGraphBackend
            hnote over backendMessageHandler: ""serialize(responseBin)""
            messageDispatcher <- - backendMessageHandler
        deactivate backendMessageHandler
    hnote over messageDispatcher: ""responseBin.Finished()""

    CEF -> requestHandler : ""GetResponseHeaders(response, responseLength, redirectUrl)""
    deactivate messageDispatcher 
    activate requestHandler
        hnote over requestHandler: set MIME type and response length
        CEF <- requestHandler : ""true, bytesRead = 512""
    deactivate requestHandler

    CEF -> requestHandler : ""ReadResponse(dataOut, bytesToRead, bytesRead, callback)""
    activate requestHandler
        hnote over requestHandler: copy data to dataOut
        CEF <- requestHandler : ""true, bytesRead = 512""
    deactivate requestHandler

    CEF -> client : AJAX Response
deactivate CEF
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>